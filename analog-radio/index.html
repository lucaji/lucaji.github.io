<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Analog Radio - Lucaji</title><meta name="Description" content="An AM audio modulator and transmitter, and some other radio experiments."><meta property="og:title" content="Analog Radio" />
<meta property="og:description" content="An AM audio modulator and transmitter, and some other radio experiments." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://lucaji.github.io/analog-radio/" /><meta property="og:image" content="https://lucaji.github.io/analog-radio/am_receiver.jpg"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-01-19T00:00:00+00:00" />
<meta property="article:modified_time" content="2015-01-19T00:00:00+00:00" /><meta property="og:site_name" content="Lucaji" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://lucaji.github.io/analog-radio/am_receiver.jpg"/>
<meta name="twitter:title" content="Analog Radio"/>
<meta name="twitter:description" content="An AM audio modulator and transmitter, and some other radio experiments."/>
<meta name="application-name" content="Lucaji">
<meta name="apple-mobile-web-app-title" content="Lucaji">
<meta name="referrer" content="no-referrer" /><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://lucaji.github.io/analog-radio/" /><link rel="prev" href="https://lucaji.github.io/tube-amps/" /><link rel="next" href="https://lucaji.github.io/geloso-tube-amp-open-air-cinema-restoration/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Analog Radio",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/lucaji.github.io\/analog-radio\/"
        },"image": [{
                            "@type": "ImageObject",
                            "url": "https:\/\/lucaji.github.io\/analog-radio\/am_receiver.jpg",
                            "width":  1326 ,
                            "height":  630 
                        }],"genre": "posts","keywords": "Radio, HAM, Arduino","wordcount":  1364 ,
        "url": "https:\/\/lucaji.github.io\/analog-radio\/","datePublished": "2015-01-19T00:00:00+00:00","dateModified": "2015-01-19T00:00:00+00:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "Luca","logo": "https:\/\/lucaji.github.io\/avatar.png"},"author": {
                "@type": "Person",
                "name": "Luca Cipressi"
            },"description": "An AM audio modulator and transmitter, and some other radio experiments."
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Lucaji"><span class="header-title-pre"><i class='fa-solid fa-pepper-hot' aria-hidden='true'></i></span>lucaji</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categories </a><a class="menu-item" href="/about/"> About </a><a class="menu-item" href="https://github.com/lucaji" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i>  </a><a class="menu-item" href="https://stackoverflow.com/users/4111774" title="StackOverflow" rel="noopener noreffer" target="_blank"><i class='fab fa-stack-overflow fa-fw' aria-hidden='true'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Lucaji"><span class="header-title-pre"><i class='fa-solid fa-pepper-hot' aria-hidden='true'></i></span>lucaji</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categories</a><a class="menu-item" href="/about/" title="">About</a><a class="menu-item" href="https://github.com/lucaji" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i></a><a class="menu-item" href="https://stackoverflow.com/users/4111774" title="StackOverflow" rel="noopener noreffer" target="_blank"><i class='fab fa-stack-overflow fa-fw' aria-hidden='true'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content always-active" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Analog Radio</h1><h2 class="single-subtitle">Experimenting radio transmission</h2><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://lucaji.github.io" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Luca Cipressi</a></span>&nbsp;<span class="post-category">included in <a href="/categories/electronics/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>Electronics</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2015-01-19">2015-01-19</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;1364 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;7 minutes&nbsp;</div>
        </div><div class="featured-image"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/analog-radio/am_receiver.jpg"
        data-srcset="/analog-radio/am_receiver.jpg, /analog-radio/am_receiver.jpg 1.5x, /analog-radio/am_receiver.jpg 2x"
        data-sizes="auto"
        alt="/analog-radio/am_receiver.jpg"
        title="An AM audio modulator and transmitter, and some other radio experiments." /></div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#analog-radio">ANALOG RADIO!</a>
      <ul>
        <li><a href="#arduino-am">ARDUINO AM</a>
          <ul>
            <li><a href="#arduino-am-source-code">ARDUINO AM SOURCE CODE</a></li>
            <li><a href="#arduino-am-cw">ARDUINO AM CW</a></li>
          </ul>
        </li>
        <li><a href="#galena">Galena</a>
          <ul>
            <li><a href="#galena-radio">Galena Radio</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h1 id="analog-radio">ANALOG RADIO!</h1>
<p>being a fan of old analog radio sets, I decided to collect these related projects starting from a Galena radio receiver that does not need power supply to operate, up to some Arduino experiments&hellip; Some analog but digitally driven audio transmission and analog modulation (mostly amplitude). Have fun!</p>
<p>The first is an audio transmitter over LW radio band (734 kHz) in amplitude modulation (AM) which might be easily picked by a once-common radio set.</p>
<h2 id="arduino-am">ARDUINO AM</h2>
<p>A little playground to test audio transmission in AM (amplitude modulation) using the Arduino timers to generate the carrier frequency and its internal ADC to modulate the tuned circuit at the antenna side with the amplitude of the input signal.</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="am_receiver.jpg"
        data-srcset="am_receiver.jpg, am_receiver.jpg 1.5x, am_receiver.jpg 2x"
        data-sizes="auto"
        alt="am_receiver.jpg"
        title="AM receiver schematic" /></p>
<p>Here is a simple AM Receiver schematic included for reference and testing, but being the original source, it has to be adapted to the wavelength used in the above project as it is tuned for 88-108MHz or higher (VHF). Extra wire-loops are needed when winding L1 to lower its resonant frequency.</p>
<p>The second experiment is about transmitting encoded data (morse) over the same media.
A third experiment explores the frequency modulation with little success.</p>
<h3 id="arduino-am-source-code">ARDUINO AM SOURCE CODE</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">//  Simple AM Radio Signal Generator :: Markus Gritsch
</span></span><span class="line"><span class="cl">//  http://www.youtube.com/watch?v=y1EKyQrFJ-o
</span></span><span class="line"><span class="cl">//
</span></span><span class="line"><span class="cl">//                /|\ +5V                               ANT
</span></span><span class="line"><span class="cl">//                 |                                   \ | /
</span></span><span class="line"><span class="cl">//                 |        ----------------            \|/
</span></span><span class="line"><span class="cl">//                | | R1   | Arduino 16 MHz |     C2     |
</span></span><span class="line"><span class="cl">//                | | 47k  |                |     ||     |  about
</span></span><span class="line"><span class="cl">//  audio   C1    | |      |      TIMER_PIN &gt;-----||-----+  40Vpp
</span></span><span class="line"><span class="cl">//  input   ||     |       |                |     ||     |
</span></span><span class="line"><span class="cl">//    o-----||-----+-------&gt; INPUT_PIN      |     1nF    |
</span></span><span class="line"><span class="cl">//         +||     |       |                |             )
</span></span><span class="line"><span class="cl">//          1uF   | | R2   |   ATmega328P   |             ) L1
</span></span><span class="line"><span class="cl">//                | | 47k   ----------------   fres =     ) 47uH
</span></span><span class="line"><span class="cl">//    fg &lt; 7 Hz   | |                          734 kHz    )
</span></span><span class="line"><span class="cl">//                 |                                     |
</span></span><span class="line"><span class="cl">//                 |                                     |
</span></span><span class="line"><span class="cl">//                --- GND                               --- GND
</span></span><span class="line"><span class="cl">//
</span></span><span class="line"><span class="cl">//    fg = 1 / ( 2 * pi * ( R1 || R2 ) * C1 ) &lt; 7 Hz
</span></span><span class="line"><span class="cl">//  fres = 1 / ( 2 * pi * sqrt( L1 * C2 ) ) = 734 kHz
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#define INPUT_PIN  0 // ADC input pin
</span></span><span class="line"><span class="cl">#define TIMER_PIN  3 // PWM output pin, OC2B (PD3)
</span></span><span class="line"><span class="cl">#define DEBUG_PIN  2 // to measure the sampling frequency
</span></span><span class="line"><span class="cl">#define LED_PIN   13 // displays input overdrive
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#define SHIFT_BY   3 // 2 ... 7 input attenuator
</span></span><span class="line"><span class="cl">#define TIMER_TOP 20 // determines the carrier frequency
</span></span><span class="line"><span class="cl">#define A_MAX TIMER_TOP / 4
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">void setup() {
</span></span><span class="line"><span class="cl">    pinMode( DEBUG_PIN, OUTPUT );
</span></span><span class="line"><span class="cl">    pinMode( TIMER_PIN, OUTPUT );
</span></span><span class="line"><span class="cl">    pinMode( LED_PIN, OUTPUT );
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    // set ADC prescaler to 16 to decrease conversion time (0b100)
</span></span><span class="line"><span class="cl">    ADCSRA = ( ADCSRA | _BV( ADPS2 ) ) &amp; ~( _BV( ADPS1 ) | _BV( ADPS0 ) );
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    // non-inverting; fast PWM with TOP; no prescaling
</span></span><span class="line"><span class="cl">    TCCR2A = 0b10100011; // COM2A1 COM2A0 COM2B1 COM2B0 - - WGM21 WGM20
</span></span><span class="line"><span class="cl">    TCCR2B = 0b00001001; // FOC2A FOC2B - - WGM22 CS22 CS21 CS20
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    // 16E6 / ( OCR2A + 1 ) = 762 kHz @ TIMER_TOP = 20
</span></span><span class="line"><span class="cl">    OCR2A = TIMER_TOP; //   = 727 kHz @ TIMER_TOP = 21
</span></span><span class="line"><span class="cl">    OCR2B = TIMER_TOP / 2; // maximum carrier amplitude at 50% duty cycle
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">void loop() {
</span></span><span class="line"><span class="cl">    // about 34 kHz sampling frequency
</span></span><span class="line"><span class="cl">    digitalWrite( DEBUG_PIN, HIGH );
</span></span><span class="line"><span class="cl">    int8_t value = ( analogRead( INPUT_PIN ) &gt;&gt; SHIFT_BY ) -
</span></span><span class="line"><span class="cl">                   ( 1 &lt;&lt; ( 9 - SHIFT_BY ) );
</span></span><span class="line"><span class="cl">    digitalWrite( DEBUG_PIN, LOW );
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    // clipping
</span></span><span class="line"><span class="cl">    if ( value &lt; -A_MAX ) {
</span></span><span class="line"><span class="cl">        value = -A_MAX;
</span></span><span class="line"><span class="cl">        digitalWrite( LED_PIN, HIGH );
</span></span><span class="line"><span class="cl">    } else if ( value &gt; A_MAX ) {
</span></span><span class="line"><span class="cl">        value = A_MAX;
</span></span><span class="line"><span class="cl">        digitalWrite( LED_PIN, HIGH );
</span></span><span class="line"><span class="cl">    } else {
</span></span><span class="line"><span class="cl">        digitalWrite( LED_PIN, LOW );
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    OCR2B = A_MAX + value;
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="arduino-am-cw">ARDUINO AM CW</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">// AM broadcasting CW using arduino
</span></span><span class="line"><span class="cl">// Based on the code from WWW.JONNYBLANCH.WEBS.COM, which was broken
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">long millisAtStart=0;
</span></span><span class="line"><span class="cl">long millisAtEnd=0;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">const long period_broadcast=8; //period of shortest broadcast (256 port changes)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#define LENGTH_DIT 50
</span></span><span class="line"><span class="cl">//number of period_broadcasts in one &#39;dit&#39;,
</span></span><span class="line"><span class="cl">//all other lengths are scaled from this
</span></span><span class="line"><span class="cl">//Broadcasts on 1337 kHz
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">// You should put some piece of wire as antenna in digital port 8. 
</span></span><span class="line"><span class="cl">// The experiments at www.mateslab.com.ar show us that a 20cm cable can be tuned with a radio from 2,5 meters. With a 50cm antena you can tune it from 5 meters.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">const int length_dit=LENGTH_DIT; //number of periods for dit
</span></span><span class="line"><span class="cl">const int pause_dit=LENGTH_DIT; //pause after dit
</span></span><span class="line"><span class="cl">const int length_dah=3*LENGTH_DIT; //number of persots for dah
</span></span><span class="line"><span class="cl">const int pause_dah=LENGTH_DIT; //pause after dah
</span></span><span class="line"><span class="cl">const int length_pause=7*LENGTH_DIT; //pause between words
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">void dit(void);
</span></span><span class="line"><span class="cl">void dah(void);
</span></span><span class="line"><span class="cl">void pause(void);
</span></span><span class="line"><span class="cl">void broadcast(int N_cycles);
</span></span><span class="line"><span class="cl">void dontbroadcast(int N_cycles);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">// ### INC ### Increment Register (reg = reg + 1)
</span></span><span class="line"><span class="cl">#define ASM_INC(reg) asm volatile (&#34;inc %0&#34; : &#34;=r&#34; (reg) : &#34;0&#34; (reg))
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">void setup()
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  Serial.begin(9600);
</span></span><span class="line"><span class="cl">  DDRB=0xFF;  //Port B all outputs
</span></span><span class="line"><span class="cl">  //Do one dit to determine approximate frequency
</span></span><span class="line"><span class="cl">  millisAtStart=millis();
</span></span><span class="line"><span class="cl">  dit();
</span></span><span class="line"><span class="cl">  millisAtEnd=millis();
</span></span><span class="line"><span class="cl">  Serial.print(millisAtEnd-millisAtStart);
</span></span><span class="line"><span class="cl">  Serial.print(&#34; &#34;);
</span></span><span class="line"><span class="cl">  Serial.print((length_dit+pause_dit)*period_broadcast*256/(millisAtEnd-millisAtStart)/2);
</span></span><span class="line"><span class="cl">  Serial.print(&#34;kHz &#34;);
</span></span><span class="line"><span class="cl">  Serial.println();
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">void loop()
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">// Sends SOS
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">dah();
</span></span><span class="line"><span class="cl">char_pause();
</span></span><span class="line"><span class="cl">dah();
</span></span><span class="line"><span class="cl">char_pause();
</span></span><span class="line"><span class="cl">dah();
</span></span><span class="line"><span class="cl">char_pause();
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">dit();
</span></span><span class="line"><span class="cl">char_pause();
</span></span><span class="line"><span class="cl">dit();
</span></span><span class="line"><span class="cl">char_pause();
</span></span><span class="line"><span class="cl">dit();
</span></span><span class="line"><span class="cl">char_pause();
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">word_pause();
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">// Outputs a dot (.)
</span></span><span class="line"><span class="cl">void dit(void)
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">  for(int i=0; i &lt;= length_dit; i++) // now is 64
</span></span><span class="line"><span class="cl">      broadcast(period_broadcast); 
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">// Output a dash (-)
</span></span><span class="line"><span class="cl">void dah(void)
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">  for(int i=0; i &lt;= length_dah; i++) // now is 64*3
</span></span><span class="line"><span class="cl">      broadcast(period_broadcast); 
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">// Short pause between chars
</span></span><span class="line"><span class="cl">void char_pause(void)
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">  for(int i=0; i &lt;= length_dit; i++) // now is 64
</span></span><span class="line"><span class="cl">    dontbroadcast(period_broadcast);
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">// Long pause between words
</span></span><span class="line"><span class="cl">void word_pause(void)
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">  for(int i=0; i &lt;= length_pause; i++) // now is 64
</span></span><span class="line"><span class="cl">    dontbroadcast(period_broadcast);
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">// This send something to the air
</span></span><span class="line"><span class="cl">void broadcast(int N_cycles)
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">  unsigned int portvalue;
</span></span><span class="line"><span class="cl">  for (int i=0;i &lt; N_cycles; i++) {
</span></span><span class="line"><span class="cl">    do
</span></span><span class="line"><span class="cl">    {
</span></span><span class="line"><span class="cl">	PORTB=portvalue;
</span></span><span class="line"><span class="cl">	ASM_INC(portvalue);
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">    while(portvalue&lt;255);
</span></span><span class="line"><span class="cl">  }
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">// This do not send anything to the air
</span></span><span class="line"><span class="cl">void dontbroadcast(int N_cycles)
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">unsigned int portvalue;
</span></span><span class="line"><span class="cl">  PORTB=0x00;
</span></span><span class="line"><span class="cl">  for (int i=0;i &lt; N_cycles; i++) 
</span></span><span class="line"><span class="cl">  {
</span></span><span class="line"><span class="cl">    do {
</span></span><span class="line"><span class="cl">  	ASM_INC(portvalue);
</span></span><span class="line"><span class="cl">  	//add some assembly No OPerations to keep timing the same
</span></span><span class="line"><span class="cl">  	asm volatile (&#34;NOP&#34;);
</span></span><span class="line"><span class="cl">      } while(portvalue &lt; 255);
</span></span><span class="line"><span class="cl">  }    
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="galena">Galena</h2>
<p>Galena or lead glance, is the natural mineral form of lead sulfide (PbS) being one of the most abundant and widely distributed sulfide minerals. One of the oldest uses of galena was as an eye cosmetic. Galena is a semiconductor with a small band gap of about 0.4 eV, which found use in early wireless communication systems. It was used as the crystal in radio receivers, in which it was used as a point-contact diode capable of rectifying alternating current to detect the radio signals. The galena crystal was used with a sharp wire, known as <a href="https://en.wikipedia.org/wiki/Crystal_detector" target="_blank" rel="noopener noreffer ">cat&rsquo;s whisker</a> in contact with it.</p>
<h3 id="galena-radio">Galena Radio</h3>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/analog-radio/galena_fm.jpg"
        data-srcset="/analog-radio/galena_fm.jpg, /analog-radio/galena_fm.jpg 1.5x, /analog-radio/galena_fm.jpg 2x"
        data-sizes="auto"
        alt="/analog-radio/galena_fm.jpg"
        title="Galena Radio" width="960" height="716" /></p>
<p>This is a rather funky project, as it powers itself up from the radio waves it receives, but you will need a very high-impendace headset (&gt; 10KΩ)</p>
<p><a href="https://en.wikipedia.org/wiki/Crystal_radio" target="_blank" rel="noopener noreffer ">Crystal Radio</a> or Galena Radio are &ldquo;unpowered&rdquo; radio-receivers sets. They actually power-up themselves by using the captated radio energy via its Antenna. Some technical consideration (like using high-impedance headphones) reduces the energy-losses and maximize efficiency, in order to have a working radio receiver without any power supply, not batteries nor dinamo.</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2015-01-19</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://lucaji.github.io/analog-radio/" data-hashtag="Radio"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Linkedin" data-sharer="linkedin" data-url="https://lucaji.github.io/analog-radio/"><i class="fab fa-linkedin fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Reddit" data-sharer="reddit" data-url="https://lucaji.github.io/analog-radio/"><i class="fab fa-reddit fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="https://lucaji.github.io/analog-radio/" data-title="Analog Radio"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="https://lucaji.github.io/analog-radio/" data-title="Analog Radio"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/radio/">Radio</a>,&nbsp;<a href="/tags/ham/">HAM</a>,&nbsp;<a href="/tags/arduino/">Arduino</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/tube-amps/" class="prev" rel="prev" title="Tube Amps Builds 🎸"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>Tube Amps Builds 🎸</a>
            <a href="/geloso-tube-amp-open-air-cinema-restoration/" class="next" rel="next" title="Restoration of an old open-air cinema PA">Restoration of an old open-air cinema PA<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.112.0">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2013 - 2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://lucaji.github.io" target="_blank">Luca Cipressi</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"lightgallery":true,"search":{"highlightTag":"em","lunrIndexURL":"/index.json","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
